<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Real-Time Financial Expert</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Real-Time Financial Expert</h1>
  <p class="sub">Enter a stock ticker (e.g., AAPL, MSFT) to simulate financial, sentiment, and risk analysis. This static version runs entirely in your browser with mock data.</p>

  <div class="disclaimer">This tool uses heuristic mock models in your browser to simulate financial health, sentiment, and risk. Not investment advice.</div>
  <div id="layout" style="display:grid; grid-template-columns: 1fr 380px; gap:14px; align-items:start; max-width:1240px;">
    <div>
      <div id="chatbox"></div>
      <div class="input-area">
        <input id="userInput" type="text" placeholder="Enter a stock ticker (e.g. AAPL)" />
        <div class="toolbar">
          <button id="sendBtn">Analyze</button>
          <button id="liveBtn" class="secondary" title="Toggle live polling">Live: Off</button>
          <button id="settingsBtn" class="neutral" title="Configure real-time inputs">Settings</button>
          <button id="copyBtn" class="secondary" title="Copy JSON to clipboard">Copy JSON</button>
          <button id="downloadBtn" class="neutral" title="Download JSON">Download JSON</button>
          <button id="shareBtn" class="neutral" title="Share deep link">Share Link</button>
          <button id="clearBtn" class="danger" title="Clear chat">Clear</button>
        </div>
      </div>
    </div>

    <aside id="askPanel" style="border:1px solid #d0d6df; background:#fff; border-radius:10px; padding:12px;">
      <div style="font-weight:bold; margin-bottom:6px;">Ask the Ticker</div>
      <div class="meta">Grounded Q&A over live headlines/social. Uses embeddings when available.</div>
      <div class="hr"></div>
      <input id="qaInput" type="text" placeholder="Ask about catalysts, risks, guidance, etc." />
      <div class="toolbar">
        <button id="askBtn" class="secondary" title="Answer from context">Answer from context</button>
        <button id="refreshAnswerBtn" class="neutral" title="Re-run ranking on latest index">Refresh</button>
      </div>
      <div style="display:flex; gap:8px; align-items:center; margin:6px 0;">
        <label style="display:flex; gap:6px; align-items:center; font-size:12px; color:#555;">
          <input id="toggleSources" type="checkbox" /> Show sources
        </label>
      </div>
      <div id="answerBox" class="card" style="min-height:60px;"></div>
      <div id="answerToolbar" class="toolbar">
        <button id="copyAnswerJson" class="secondary" title="Copy answer JSON">Copy JSON</button>
        <button id="downloadAnswerJson" class="neutral" title="Download answer JSON">Download JSON</button>
      </div>
      <details id="whyAnswer" style="margin-top:8px;">
        <summary>Why this answer</summary>
        <div id="whyAnswerBody" class="meta"></div>
      </details>
    </aside>
  </div>

  <div id="settingsPanel" style="display:none; max-width:960px; border:1px solid #d0d6df; border-radius:10px; padding:12px; background:#fff; margin:10px 0;">
    <div style="font-weight:bold; margin-bottom:6px;">Real-time Inputs Settings</div>
    <div style="display:grid; grid-template-columns:1fr; gap:8px;">
      <label>
        Custom Headlines API URL (optional):
        <input id="newsUrl" type="text" placeholder="e.g. https://example.com/news?ticker={ticker}" style="width:100%; padding:8px; border:1px solid #bbb; border-radius:6px;">
      </label>
      <label>
        Custom Social API URL (optional):
        <input id="socialUrl" type="text" placeholder="e.g. https://example.com/social?ticker={ticker}" style="width:100%; padding:8px; border:1px solid #bbb; border-radius:6px;">
      </label>
      <label>
        Polling Interval (seconds):
        <input id="pollInterval" type="number" min="5" value="30" style="width:120px; padding:8px; border:1px solid #bbb; border-radius:6px;">
      </label>
      <div class="meta">Notes: The URLs must allow CORS and return JSON. Headlines: array of { title, published_at, source } or strings. Social: array of { text, published_at, platform, engagement, author_followers } or strings.</div>
    </div>
    <div style="margin-top:10px; display:flex; gap:8px;">
      <button id="saveSettings" class="secondary">Save</button>
      <button id="closeSettings" class="neutral">Close</button>
    </div>
  </div>

  <div id="updatesToast" style="display:none; position:fixed; bottom:16px; right:16px; background:#1b4332; color:#e6fffa; border-radius:8px; padding:10px 12px; box-shadow:0 2px 8px rgba(0,0,0,.2); z-index:1000;">
    Index updated Â· <span id="docCounts">0 docs</span>
  </div>

  <script src="script.js"></script>
</body>
</html>


